#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <regex.h>

int main(int argc, char * argv[])
{
	int status;
	int i;
	int cflags = REG_EXTENDED;
	regmatch_t pmatch[1];
	const size_t nmatch = 1;
	regex_t reg;
	const char * pattern = "_X., value [0-9]+";
	char * buf = "(ABS_MT_POSITION_X), value 222";

	regcomp(&reg, pattern, cflags);
	status = regexec(&reg, buf, nmatch, pmatch, 0);
	if ( status == 0)
	{
		int n = 0;
		printf("Match : ");
		for (i = pmatch[0].rm_so + 11; i < pmatch[0].rm_eo; i++)	
		{
			n *= 10;
			n += buf[i] - '0';
		}
		printf("%d\n", n);
	}
	else 
	{
		printf("failed!\n");
	}
}










